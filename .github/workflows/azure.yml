# File: .github/workflows/workflow.yml

on:
  workflow_dispatch:

name: AzureCLISample

jobs:

  testing:
    runs-on: ubuntu-latest
    steps:

    - name: Azure Login
      uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}

    - name: Azure CLI script
      id: step_one
      uses: azure/CLI@v1
      with:
        azcliversion: 2.30.0
        inlineScript: |
          az account show
          echo 'MY_SECRET={`az keyvault secret show --name "ExamplePassword" --vault-name "abirismyname-kv" --query "value"`}' >> $GITHUB_OUTPUT
    - name: Use the value
      id: step_two
      run: |
        run: echo "The selected color is ${{ steps.step_one.outputs.MY_SECRET }}"      
